(function(e){function t(t){for(var o,i,c=t[0],s=t[1],u=t[2],f=0,d=[];f<c.length;f++)i=c[f],a[i]&&d.push(a[i][0]),a[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={1:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;r.push([7,0]),n()})({"/QIv":function(e,t,n){"use strict";var o=n("foEp"),a=n.n(o);a.a},1:function(e,t){},7:function(e,t,n){e.exports=n("zUnb")},Cuki:function(e,t,n){},SpIO:function(e,t,n){"use strict";var o=n("p7R1"),a=n.n(o);a.a},foEp:function(e,t,n){},gQZL:function(e,t,n){"use strict";var o=n("yvVj"),a=n.n(o);a.a},imG6:function(e,t,n){"use strict";var o=n("jWB4"),a=n.n(o);a.a},jWB4:function(e,t,n){},nNx0:function(e,t,n){"use strict";var o=n("uWEC"),a=n.n(o);a.a},p7R1:function(e,t,n){},uWEC:function(e,t,n){},xf67:function(e,t,n){"use strict";var o=n("Cuki"),a=n.n(o);a.a},yvVj:function(e,t,n){},zUnb:function(e,t,n){"use strict";n.r(t);n("VRzm");var o=n("Kw5r"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i=(n("nNx0"),n("KHd+")),c={},s=Object(i["a"])(c,a,r,!1,null,null,null),u=s.exports,l=n("jE9Z"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"home"},[n("Header",{attrs:{numberOfUsers:e.connectedUsers.length},on:{toggleShare:function(t){e.showShareModal=!e.showShareModal},toggleAbout:function(t){e.showAboutModal=!e.showAboutModal},toggleContact:function(t){e.showContactModal=!e.showContactModal}}}),e.notifications.length?n("div",{staticClass:"notifications"},e._l(e.notifications,function(t){return n("Notification",[n("p",[e._v(e._s(t))])])})):e._e(),e.showNameModal&&e.hasLocationEnabled?n("Modal",{staticClass:"name-modal",attrs:{canClose:!1},on:{close:function(t){e.showNameModal=!1}}},[n("h3",[e._v("\n      Enter a name that "),n("br"),e._v("others will see\n    ")]),n("form",{on:{submit:function(t){e.submitName()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticStyle:{"margin-bottom":"15px"},attrs:{type:"text"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),n("button",{attrs:{disabled:!e.user.name},on:{click:function(t){e.submitName()}}},[e._v("Next")])]):e._e(),e.showShareModal&&e.hasLocationEnabled?n("Modal",{staticClass:"share-modal",on:{close:function(t){e.showShareModal=!1}}},[n("h3",[e._v("\n      Send the URL to share your live location with someone\n    ")]),n("p",{attrs:{id:"share-url","data-clipboard-target":"#share-url"}},[e._v(e._s(e.baseURL+"?q="+e.user.groupId))]),n("p",[e._v(e._s(e.hasCopiedUrl?"Copied!":"Click the box to copy"))]),e.connectedUsers.length?n("p",[e._v("Sharing your location with "),n("b",[e._v(e._s(e.connectedUsers.length))]),e._v(" "+e._s(e.connectedUsers.length>1?"people":"person"))]):e._e(),e.connectedUsers.length?n("ul",{staticClass:"users"},e._l(e.connectedUsers,function(t){return n("li",[e._v(" "+e._s(t.name)+" ")])})):e._e(),n("button",{on:{click:function(t){e.showShareModal=!1}}},[e._v("Got It")])]):e._e(),e.hasLocationEnabled?e._e():n("Modal",{attrs:{canClose:!1}},[n("h3",[e._v("Sorry!")]),n("p",[e._v("This app needs location enabled to work")])]),e.showAboutModal?n("Modal",{on:{close:function(t){e.showAboutModal=!1}}},[n("h3",[e._v("About")]),n("p",[n("b",[e._v("AreYouHereYet")]),e._v(" is a little project to help people find each other in real time, quickly, and easily. ")]),n("p",[e._v("No fancy bells & whistles. ")]),n("p",[e._v("Just share a URL, and you're good to go.")]),n("p",[n("a",[e._v("GitHub")]),n("span",{staticClass:"divider"}),n("a",{attrs:{href:"mailto:matthewpua@gmail.com",target:"_blank",rel:"noopener"}},[e._v("Email Me")])])]):e._e(),n("MapWrapper",{attrs:{canGetLocation:e.canGetLocation,users:[e.user].concat(e.connectedUsers)},on:{"update-location":e.updateSelfLocation,"deny-geolocation":function(t){e.hasLocationEnabled=!1}}})],1)},d=[],p=(n("f3/d"),n("INYr"),n("xmWZ")),h=n("3Aqn"),b=n("qpph"),m=n("0yhX"),v=n("EdlT"),g=n("a94B"),y=n("YKMj"),j=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-wrapper"},[n("div",{attrs:{id:"map"}})])}],w=(n("KKXr"),n("dRSK"),n("4ZJM")),k=n.n(w),_=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":Object(g["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},M=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(m["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.userId="",e}return Object(h["a"])(t,e),t}(k.a.Marker),C=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(m["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.markers=[],e.hasCenteredMapOnUserLocation=!1,e.mapBoxConfig={container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[-79.706967,43.571177],zoom:14},e.mapDirectionsConfig={accessToken:"pk.eyJ1IjoibWF0dHB1YSIsImEiOiJjamNpYXdrdTAwZXp6MnFuc2RseGZzMXM2In0.KIYvBm0y1FWVn_WhnhzIFQ",unit:"metric",interactive:!1},e.mapGeolocationConfig={positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0},e}return Object(b["a"])(t,[{key:"created",value:function(){var e=this;this.$watch("users",function(t,n){e.updateMarkers(t)}),this.$watch("canGetLocation",function(t,n){t&&e.getCurrentLocationByNavigator()})}},{key:"mounted",value:function(){k.a.accessToken="pk.eyJ1IjoibWF0dHB1YSIsImEiOiJjamNpYXdrdTAwZXp6MnFuc2RseGZzMXM2In0.KIYvBm0y1FWVn_WhnhzIFQ",this.setupMap()}},{key:"setupMap",value:function(){this.map=new k.a.Map(this.mapBoxConfig),this.map.addControl(new k.a.NavigationControl,"bottom-right"),this.map.addControl(new k.a.GeolocateControl(this.mapGeolocationConfig),"bottom-left")}},{key:"getCurrentLocationByNavigator",value:function(){var e=this;"undefined"!==typeof navigator&&navigator.geolocation?navigator.geolocation.watchPosition(function(t){e.hasCenteredMapOnUserLocation||(e.map.flyTo({center:[t.coords.longitude,t.coords.latitude]}),e.hasCenteredMapOnUserLocation=!0),e.$emit("update-location",t.coords)},function(t){console.error(t,"could not find position using navigator"),e.$emit("deny-geolocation")},{timeout:1e4,enableHighAccuracy:!0,maximumAge:6e4}):console.error("browser does not support geolocation")}},{key:"createMarker",value:function(e,t){var n=new M(t);return e.id&&(n.userId=e.id),e.position&&(n=n.setLngLat([e.position.lng,e.position.lat])),n.setPopup(new k.a.Popup({closeOnClick:!1,offset:25}).setHTML("<h3>"+e.name+"</h3>")),n.addTo(this.map),n}},{key:"updateMarkers",value:function(e){var t=this;this.markers=e.filter(function(e){return e.position&&e.position.lat}).map(function(e){var n;if(t.markers.find(function(t){return t.userId===e.id})){n=t.markers.find(function(t){return t.userId===e.id});var o=[e.position.lng,e.position.lat];n.setLngLat(o)}else{var a=document.createElement("div"),r=document.createElement("div"),i=e.name?e.name.split(" "):[];a.className="custom-marker",r.className="inner-content",r.textContent=i[0][0].toUpperCase()+(i.length>1?i[1][0].toUpperCase():""),a.appendChild(r),n=t.createMarker(e,a)}return n})}}]),Object(h["a"])(t,e),t}(y["b"]);C=_([Object(y["a"])({props:{users:{default:function(){return[]}},canGetLocation:{type:Boolean,default:function(){return!1}}}})],C);var S=C,U=S,x=(n("xf67"),Object(i["a"])(U,j,O,!1,null,null,null)),L=x.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("span",{staticClass:"menu",on:{click:function(t){e.showExpandedMenu=!e.showExpandedMenu}}},[n("i",{staticClass:"fas fa-ellipsis-h"}),n("span",[e._v("Menu")])]),n("span",{staticClass:"logo"},[n("router-link",{attrs:{to:"/"}},[e._v("AreYouHereYet")])],1),n("span",{staticClass:"share-popup",on:{click:function(t){e.$emit("toggleShare")}}},[n("i",{staticClass:"fas fa-share-alt"}),n("span",[e._v("Share")]),n("span",{staticClass:"share-count"},[e._v(e._s(e.numberOfUsers))])]),e.showExpandedMenu?n("div",{staticClass:"content"},[n("div",{on:{click:function(t){e.$emit("toggleAbout")}}},[e._v("About")])]):e._e()])},I=[],E=(n("xfY5"),function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":Object(g["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}),N=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(m["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.showExpandedMenu=!1,e}return Object(b["a"])(t,[{key:"created",value:function(){}},{key:"mounted",value:function(){}}]),Object(h["a"])(t,e),t}(y["b"]);N=E([Object(y["a"])({props:{numberOfUsers:{type:Number,default:function(){return 0}}}})],N);var P=N,A=P,B=(n("SpIO"),Object(i["a"])(A,R,I,!1,null,"9b8f51e8",null)),G=B.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-wrapper"},[e.blurBackground?n("div",{staticClass:"background"}):e._e(),n("div",{staticClass:"modal"},[e.canClose?n("i",{staticClass:"fas fa-times",on:{click:function(t){e.$emit("close")}}}):e._e(),e._t("default")],2)])},$=[],Y=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":Object(g["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},W=function(e){function t(){return Object(p["a"])(this,t),Object(m["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(b["a"])(t,[{key:"created",value:function(){}},{key:"mounted",value:function(){}}]),Object(h["a"])(t,e),t}(y["b"]);W=Y([Object(y["a"])({props:{blurBackground:{type:Boolean,default:function(){return!0}},canClose:{type:Boolean,default:function(){return!0}}}})],W);var J=W,F=J,H=(n("/QIv"),Object(i["a"])(F,T,$,!1,null,"2ae903ea",null)),q=H.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"notification"},[e._t("default")],2)},X=[],Z=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":Object(g["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},z=function(e){function t(){return Object(p["a"])(this,t),Object(m["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(b["a"])(t,[{key:"created",value:function(){}},{key:"mounted",value:function(){}}]),Object(h["a"])(t,e),t}(y["b"]);z=Z([y["a"]],z);var D=z,Q=D,V=(n("gQZL"),Object(i["a"])(Q,K,X,!1,null,"7c24eab9",null)),ee=V.exports;n("a1Th");function te(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var ne=function e(){Object(p["a"])(this,e)},oe=function e(){Object(p["a"])(this,e),this.position=new ne,this.id=te()},ae=n("gFX4"),re=n.n(ae),ie=n("K9Ia"),ce=function(){function e(){Object(p["a"])(this,e),this.newMemberSubscription=new ie["a"],this.memberUpdateSubscription=new ie["a"],this.locationUpdateSubscription=new ie["a"],this.socket=re.a.connect("http://54.91.95.9:3000")}return Object(b["a"])(e,[{key:"connectToServer",value:function(){var e=this;this.socket.on("connect",function(t){e.onNewMemberJoined(),e.onMemberLocationUpdate()})}},{key:"joinRoom",value:function(e){var t=this;return new Promise(function(n){t.socket.emit("join-room",e.groupId,e,function(t){console.log("join room for groupId: "+e.groupId),n(e)})})}},{key:"broadcastLocation",value:function(e){this.socket.emit("location-update",e)}},{key:"requestNewGroup",value:function(e){var t=this;return e.groupId?(console.log("User has already requested a group id Previously"),new Promise(function(t){return t(e)})):new Promise(function(n){t.socket.emit("new-group",e.name,function(t){console.log("new group created, listening for group: "+t),e.groupId=t,n(e)})})}},{key:"onNewMemberJoined",value:function(){var e=this;this.socket.on("new-member",function(t){return e.newMemberSubscription.next(t)}),this.socket.on("member-update",function(t){return e.memberUpdateSubscription.next(t)})}},{key:"updateMemberList",value:function(e){this.socket.emit("update-member-list",e)}},{key:"onMemberLocationUpdate",value:function(){var e=this;this.socket.on("member-location",function(t){return e.locationUpdateSubscription.next(t)})}}]),e}(),se=n("p0ib"),ue=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"===typeof Reflect?"undefined":Object(g["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},le=function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":Object(g["a"])(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},fe=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(m["a"])(this,Object(v["a"])(t).call(this)),e.showNameModal=!0,e.showShareModal=!1,e.showAboutModal=!1,e.connectedUsers=[],e.user=new oe,e.notifications=[],e.hasCopiedUrl=!1,e.baseURL="https://mattpua.github.io/are-you-here-yet/#/",e.canGetLocation=!1,e.hasLocationEnabled=!0,e.socket=new ce,e}return Object(b["a"])(t,[{key:"created",value:function(){var e=this;this.socket.connectToServer(),this.socket.locationUpdateSubscription.subscribe(function(t){if(t.position&&t.id!==e.user.id){var n=e.connectedUsers.findIndex(function(e){return e.id===t.id});e.connectedUsers[n].position=t.position}}),this.socket.newMemberSubscription.subscribe(function(t){e.socket.updateMemberList(e.user)}),Object(se["a"])(this.socket.newMemberSubscription,this.socket.memberUpdateSubscription).subscribe(function(t){if(e.connectedUsers.map(function(e){return e.id}).indexOf(t.id)<0){e.connectedUsers.push(t);var n=t.name+" has started sharing their location!";e.notifications.push(n),setTimeout(function(){e.notifications.splice(e.notifications.indexOf(n),1)},3e3)}else console.log("user: "+t.name+" already being tracked")});var t=this.$route.query.q;t&&(this.user.groupId=t)}},{key:"mounted",value:function(){var e=this,t=new ClipboardJS("#share-url");t.on("success",function(t){e.hasCopiedUrl=!0,setTimeout(function(){e.hasCopiedUrl=!1},2e3)})}},{key:"submitName",value:function(){var e=this;this.showNameModal=!1,this.user.groupId?this.socket.joinRoom(this.user).then(function(t){e.user=t,e.showShareModal=!1}):this.socket.requestNewGroup(this.user).then(function(t){e.user=t,e.showShareModal=!0}),this.canGetLocation=!0}},{key:"updateSelfLocation",value:function(e){this.user.position={lat:e.latitude,lng:e.longitude},this.socket.locationUpdateSubscription.next(this.user),this.user.name&&this.socket.broadcastLocation(this.user)}}]),Object(h["a"])(t,e),t}(y["b"]);fe=ue([Object(y["a"])({components:{Header:G,MapWrapper:L,Modal:q,Notification:ee}}),le("design:paramtypes",[])],fe);var de=fe,pe=de,he=(n("imG6"),Object(i["a"])(pe,f,d,!1,null,"3c920c48",null)),be=he.exports;o["default"].use(l["a"]);var me=new l["a"]({routes:[{path:"/",name:"home",component:be}]}),ve=n("L2JU");o["default"].use(ve["a"]);var ge=new ve["a"].Store({state:{},mutations:{},actions:{}}),ye=n("lIOY");Object(ye["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].config.productionTip=!1,new o["default"]({router:me,store:ge,render:function(e){return e(u)}}).$mount("#app")}});
//# sourceMappingURL=app.c10a220f.js.map